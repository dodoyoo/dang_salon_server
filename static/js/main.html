<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>댕살롱 - 애견미용 예약 서비스</title>
    <link rel="stylesheet" href="/css/main.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1 class="logo">댕살롱</h1>
          <div class="auth-buttons">
            <button class="btn btn-text">로그인</button>
            <button class="btn btn-text">회원가입</button>
          </div>
        </div>
      </header>

      <!-- Search Section -->
      <div class="search-section">
        <div class="search-container">
          <div class="search-input-container">
            <input
              type="text"
              placeholder="원하시는 애견미용실을 검색해보세요"
              class="search-input"
            />
            <i class="search-icon" data-lucide="search"></i>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="filters-section">
        <div class="filters-container">
          <button class="filter-btn filter-btn-active">전체보기</button>
          <button class="filter-btn">리뷰순</button>
          <button class="filter-btn">거리순</button>
        </div>
      </div>

      <!-- Store List -->
      <div class="store-list-section">
        <div class="store-grid" id="storeGrid">
          <!-- Stores will be loaded dynamically here -->
        </div>
      </div>

      <!-- Bottom Navigation -->
      <nav class="bottom-navigation">
        <div class="nav-container">
          <button class="nav-item nav-item-active">
            <i data-lucide="search" class="nav-icon"></i>
            <span class="nav-text">검색</span>
          </button>
          <button class="nav-item">
            <i data-lucide="star" class="nav-icon"></i>
            <span class="nav-text">찜</span>
          </button>
          <button class="nav-item">
            <i data-lucide="clock" class="nav-icon"></i>
            <span class="nav-text">예약</span>
          </button>
          <button class="nav-item">
            <i data-lucide="map-pin" class="nav-icon"></i>
            <span class="nav-text">내주변</span>
          </button>
        </div>
      </nav>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', async () => {
        const storeGrid = document.getElementById('storeGrid');
        try {
          const response = await fetch('https://52.78.136.144:4000');
          const data = await response.json();

          data.stores.forEach((store) => {
            const imageUrl =
              store.images ||
              (store.store_images.length > 0
                ? store.store_images[0].image_url
                : 'images/placeholder.jpg');
            const storeCard = `
              <div class="store-card">
                <img src="${imageUrl}" alt="${
              store.name
            }" class="store-image" />
                <div class="store-info">
                  <h3 class="store-name">${store.name}</h3>
                  <div class="store-location">
                    <i data-lucide="map-pin" class="location-icon"></i>
                    <span>${store.address}</span>
                  </div>
                  <div class="store-hours">
                    <i data-lucide="clock" class="hours-icon"></i>
                    <span>${
                      store.open_time
                        ? store.open_time.substring(0, 5)
                        : '--:--'
                    } - ${
              store.close_time ? store.close_time.substring(0, 5) : '--:--'
            }</span>
                  </div>
                  <div class="store-price">
                    <span class="price-label">기본 요금</span>
                    <span class="price-value">${store.detail}</span>
                  </div>
                </div>
              </div>
            `;
            storeGrid.innerHTML += storeCard;
          });
        } catch (error) {
          console.error('가게 정보를 불러오는 중 오류 발생:', error);
        }
      });
    </script>
  </body>
</html>
